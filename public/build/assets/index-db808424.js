import{r as t,j as e,d as i}from"./app-75085ecb.js";import R from"./Posting-2c998a2c.js";import b from"./Comment-eba3ade4.js";import"./index-fe44d177.js";function P({auth:c,user:v,postings:j}){const[f,x]=t.useState(!1),[h,p]=t.useState(!1),[l,s]=t.useState(!1),[g,k]=t.useState(null),[d,u]=t.useState([]);console.log(j),t.useEffect(()=>{(async()=>{try{const n=await(await fetch("/coba")).json();console.log(n),u(n.posting)}catch(r){console.error("Error fetching data:",r)}})()},[]);const C=()=>{x(!0),s(!0)},w=o=>{p(!0),s(!0),k(o)},a=()=>{p(!1),s(!1)},m=()=>{x(!1),s(!1)},y=o=>{u(r=>r.map(n=>n.id===o?{...n,showComments:!n.showComments}:n))};return e.jsxs("div",{children:[e.jsx("div",{style:{backgroundColor:"",marginTop:"5px",marginLeft:"5px"},children:c.user?e.jsxs(e.Fragment,{children:[e.jsx(i,{href:"/dashboard",as:"button",style:{backgroundColor:"green",color:"white",padding:"5px 10px",marginRight:"10px",borderRadius:"5px",textDecoration:"none"},children:"dashboard"}),e.jsx(i,{href:"/profile",as:"button",style:{backgroundColor:"green",color:"white",marginRight:"10px",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"Profil"}),e.jsx(i,{href:"/logout",method:"post",as:"button",style:{backgroundColor:"red",color:"white",marginRight:"10px",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"logout"}),"Hallo !!! ",c.user.name]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{href:"/login",as:"button",style:{backgroundColor:"green",color:"white",marginRight:"10px",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"Login"}),e.jsx(i,{href:"/register",as:"button",style:{backgroundColor:"green",color:"white",marginRight:"10px",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"Register"})]})}),e.jsx("div",{style:{marginLeft:"5px",marginTop:"5px"},children:e.jsx("h1",{children:"Halaman Utama"})}),f&&e.jsxs("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:"998",backdropFilter:l?"blur(5px)":"none"},children:[e.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",borderRadius:"8px",zIndex:"999"},children:e.jsx(R,{closeForm:m})}),e.jsx("button",{onClick:m,style:{backgroundColor:"red",color:"white",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"tutup"})]}),h&&e.jsxs("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:"998",backdropFilter:l?"blur(5px)":"none"},children:[e.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",borderRadius:"8px",zIndex:"999"},children:e.jsx(b,{closeForm:a,postId:g})}),e.jsx("button",{onClick:a,style:{backgroundColor:"red",color:"white",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"tutup"})]}),e.jsx("button",{onClick:C,style:{backgroundColor:"green",color:"white",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"Mulai Bikin Postingan"}),e.jsxs("div",{children:[e.jsx("h1",{children:e.jsx("center",{children:"Semua Postingan"})}),e.jsx("div",{className:"card-container",children:d&&Array.isArray(d)&&d.length>0?d.map(o=>e.jsxs("div",{className:"card",children:[e.jsx("h2",{children:o.judul}),e.jsx("p",{className:"truncate-text",style:{maxHeight:"3em",overflow:"hidden",marginBottom:"10px"},children:o.isi}),e.jsxs("span",{children:[o.komentars.length," Comment",o.komentars.length!==1?"s":""]}),e.jsxs("div",{className:"comment-button-container",children:[e.jsx("button",{onClick:()=>w(o.id),style:{backgroundColor:"red"},className:"comment-button",children:"Komentar"}),e.jsx("button",{onClick:()=>y(o.id),style:{backgroundColor:"blue",color:"white",marginTop:"5px"},children:o.showComments?"Hide Comments":"Show Comments"})]}),o.showComments&&e.jsx("div",{children:o.komentars&&o.komentars.length>0?e.jsx("ul",{children:o.komentars.map(r=>e.jsx("li",{children:r.comment},r.id))}):e.jsx("p",{children:"Tidak ada komentar."})}),h&&o.id===g&&e.jsxs("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:"998",backdropFilter:l?"blur(5px)":"none"},children:[e.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",borderRadius:"8px",zIndex:"999"},children:e.jsx(b,{closeForm:a,postId:o.id})}),e.jsx("button",{onClick:a,style:{backgroundColor:"red",color:"white",padding:"5px 10px",borderRadius:"5px",textDecoration:"none"},children:"tutup"})]})]},o.id)):e.jsx("p",{children:"Tidak ada postingan."})})]})]})}export{P as default};
